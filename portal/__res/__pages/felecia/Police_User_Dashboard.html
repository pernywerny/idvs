<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./output.css" rel="stylesheet">
    <title>Police User Dashboard</title>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Header Bar -->
    <header class="bg-gray-200 border-b border-gray-300">
        <div class="flex items-center px-4 py-2">
            <img src="gpf_logo.png" alt="Guyana Police Force Logo" class="w-10 h-10 mr-2" />
            <span class="text-lg font-semibold text-gray-800">Guyana Police Force</span>
        </div>
    </header>
    <!-- Navigation Bar -->
    <nav class="bg-blue-900 text-white flex items-center justify-between px-4 py-2">
        <div class="font-semibold text-base">IDVS Police Dashboard</div>
        <div class="flex items-center space-x-6">
            <a href="Police_User_Dashboard.html" class="hover:underline">Submitted Applications</a>
            <span id="user-email" class="hidden sm:inline"></span>
            <a href="IDVS_Login_Police.html"  id="logoutBtn" class="bg-white text-blue-900 px-3 py-1 rounded font-semibold hover:bg-blue-100 transition">Logout</a>
            <img src="gpf_logo.png" alt="Guyana Police Force Logo" class="w-8 h-8 ml-2" />
        </div>
    </nav>
    <!-- Main Content -->
    <main class="flex-1 flex flex-col items-center justify-start py-8">
        <div class="w-full max-w-2xl">
            <div class="border rounded-lg bg-white p-6 mb-8">
                <div class="text-xl font-semibold mb-2">WELCOME, <span id="citizen-name">POLICE USERS</span>!</div>
                <div class="text-sm mb-2" id="current-date"></div>
                <div class="italic text-gray-600 text-sm">"To Protect and Serve."</div>
            </div>
            <hr class="mb-6">
            <div>
                <h3 class="text-2xl font-bold text-center mb-6 tracking-wide">SUBMITTED APPLICATIONS</h3>
                <form id="search-form" class="flex flex-col md:flex-row items-center justify-center gap-4 mb-4">
                    <input id="search-input" type="text" placeholder="Search by Citizen ID or Document ID" class="border border-gray-400 rounded px-3 py-2 w-64 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    <select id="status-filter" class="border border-gray-400 rounded px-3 py-2 w-48 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Filter by status: All</option>
                                <option value="Pending">Pending</option>
                                <option value="Verified">Verified</option>
                                <option value="Rejected">Rejected</option>
                            </select>
                    <button type="submit" class="bg-white border border-gray-400 px-4 py-2 rounded hover:bg-gray-100 transition">Search</button>
                </form>
            </div>
        </div>

        <main class="flex-1 flex flex-col items-center justify-start py-8">
            <div class="w-full max-w-5xl">
                <div class="bg-white rounded-xl shadow p-8">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-semibold">Applications</h2>
                        <button id="create-request-btn" class="bg-blue-600 text-white px-6 py-2 rounded font-medium text-lg hover:bg-blue-700 transition">
                           <a href ="IDVS_Police_New_Request.html">
                            Create New Request
                            </a>
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full text-left">
                            <thead>
                                <tr class="text-gray-500 text-xs uppercase bg-gray-50">
                                    <th class="px-4 py-3">Application ID</th>
                                    <th class="px-4 py-3">Citizen Name</th>
                                    <th class="px-4 py-3">Citizen ID</th>
                                    <th class="px-4 py-3">Service Type</th>
                                    <th class="px-4 py-3">Request To</th>
                                    <th class="px-4 py-3">Status</th>
                                    <th class="px-4 py-3">Submitted On</th>
                                </tr>
                            </thead>
                            <tbody id="applications-tbody" class="text-gray-800 text-sm">
                                <!-- Dynamic rows here -->
                            </tbody>
                        </table>
                    </div>


                </div>
            </div>
        </main>
        <!-- Footer -->
    </main>
    <footer class="bg-gray-200 border-t border-gray-300 py-2 text-center text-sm text-blue-700">
        <a href="#" class="underline">The Guyana Police Force</a>
        <span class="mx-2 text-gray-400">*</span>
        <a href="#" class="underline">Privacy & Terms</a>
    </footer>
    <script>
        // Simulate police user data (replace with real data as needed)
        const user = {
            email: "policeuser@gpf.gov.gy"
        };
        document.getElementById('user-email').textContent = user.email;

        // Set current date
        const today = new Date();
        const formattedDate = today.toLocaleDateString('en-GB');
        document.getElementById('current-date').textContent = formattedDate;

        // Application data (could be fetched from an API)
        const applications = [{
            id: "APP-001",
            name: "John Doe",
            citizenId: "CIT-12345",
            documentId: "DOC-11111",
            service: "Passport Application",
            requestTo: "MoHA",
            status: "Pending",
            date: "2025-07-29"
        }, {
            id: "APP-002",
            name: "Jane Smith",
            citizenId: "CIT-23456",
            documentId: "DOC-22222",
            service: "Driver's License Renewal",
            requestTo: "GRA",
            status: "Verified",
            date: "2025-07-28"
        }, {
            id: "APP-003",
            name: "Michael Chen",
            citizenId: "CIT-34567",
            documentId: "DOC-33333",
            service: "Birth Certificate Request",
            requestTo: "GRO",
            status: "Pending",
            date: "2025-07-27"
        }, {
            id: "APP-004",
            name: "Emily White",
            citizenId: "CIT-45678",
            documentId: "DOC-44444",
            service: "Passport Application",
            requestTo: "MoHA",
            status: "Rejected",
            date: "2025-07-26"
        }];

        // Status badge color mapping
        function statusBadge(status) {
            if (status === "Pending") {
                return `<span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs font-semibold">${status}</span>`;
            }
            if (status === "Verified") {
                return `<span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-semibold">${status}</span>`;
            }
            if (status === "Rejected") {
                return `<span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-semibold">${status}</span>`;
            }
            return `<span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-semibold">${status}</span>`;
        }

        // Render table rows dynamically
        const tbody = document.getElementById('applications-tbody');

        function renderTableRows(filteredApps) {
            tbody.innerHTML = '';
            filteredApps.forEach(app => {
                const tr = document.createElement('tr');
                tr.className = "border-b last:border-b-0 hover:bg-blue-50";
                tr.innerHTML = `
                    <td class="px-4 py-3 text-blue-700 font-medium hover:underline cursor-pointer">
                        <a href="IDVS_Police_Verification.html?appId=${encodeURIComponent(app.id)}">${app.id}</a>
                    </td>
                    <td class="px-4 py-3">${app.name}</td>
                    <td class="px-4 py-3">${app.citizenId}</td>
                    <td class="px-4 py-3">${app.service}</td>
                    <td class="px-4 py-3">${app.requestTo}</td>
                    <td class="px-4 py-3">${statusBadge(app.status)}</td>
                    <td class="px-4 py-3">${app.date}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        renderTableRows(applications);

        // Search and filter functionality
        document.getElementById('search-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const searchValue = document.getElementById('search-input').value.trim().toLowerCase();
            const statusValue = document.getElementById('status-filter').value;
            const filtered = applications.filter(app => {
                const matchesSearch =
                    app.citizenId.toLowerCase().includes(searchValue) ||
                    app.documentId.toLowerCase().includes(searchValue) ||
                    app.name.toLowerCase().includes(searchValue) ||
                    app.id.toLowerCase().includes(searchValue);
                const matchesStatus = !statusValue || app.status === statusValue;
                return matchesSearch && matchesStatus;
            });
            renderTableRows(filtered);
        });


    </script>
</body>

</html>